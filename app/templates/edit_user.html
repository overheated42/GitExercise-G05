{% extends "base.html" %}
{% block title %}Edit User{% endblock %}

{% block content %}
<div class="edit-user-container">
    <h2 class="edit-user-title">Edit User</h2>

    <!-- Edit User Form -->
    <form method="POST" action="{{ url_for('admin.edit_user', user_id=user.id) }}" class="edit-user-form">

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul class="flashes">
                    {% for category, message in messages %}
                        <li class="flash {{ category }}">{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        <label for="name">Name</label>
        <input type="text" id="name" name="name" value="{{ user.name }}" placeholder="Enter name" required>

        <label for="email">Email</label>
        <input type="email" id="email" name="email" value="{{ user.email }}" placeholder="Enter email" required>

        <label for="role">Role</label>
        <select id="role" name="role" required>
            <option value="user" {% if user.role == 'user' %}selected{% endif %}>User</option>
            <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
        </select>

        <label class="checkbox-label">
            <input type="checkbox" id="is_active" name="is_active" {% if user.is_active %}checked{% endif %}>
            Active
        </label>

        <button type="submit" class="btn btn-primary">Save Changes</button>
    </form>

    <!-- Delete User -->
    <form method="POST" action="{{ url_for('admin.delete_user', user_id=user.id) }}" class="delete-user-form">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this user?');" 
                class="btn btn-danger full-width">
            Delete User
        </button>
    </form>

    <p class="back-link">
        <a href="{{ url_for('admin.dashboard') }}">Back to Admin Dashboard</a>
    </p>
</div>
{% endblock %}
