{% extends "base.html" %}
{% block title %}Edit User{% endblock %}

{% block content %}
<div class="account-bg" style="padding: 40px; max-width: 600px; margin: auto;">

    <h2 style="text-align:center;">Edit User</h2>

    <!-- Edit User Form -->
    <form method="POST" action="{{ url_for('admin.edit_user', user_id=user.id) }}" 
          style="display:flex; flex-direction:column; gap:15px; background:white; padding:20px; border-radius:10px; box-shadow:0 6px 15px rgba(0,0,0,0.1);">

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul class="flashes">
                    {% for category, message in messages %}
                        <li class="flash {{ category }}">{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}

        <label for="name">Name</label>
        <input type="text" id="name" name="name" value="{{ user.name }}" placeholder="Enter name" required>

        <label for="email">Email</label>
        <input type="email" id="email" name="email" value="{{ user.email }}" placeholder="Enter email" required>

        <label for="role">Role</label>
        <select id="role" name="role" required>
            <option value="user" {% if user.role == 'user' %}selected{% endif %}>User</option>
            <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
        </select>

        <label for="is_active">
            <input type="checkbox" id="is_active" name="is_active" {% if user.is_active %}checked{% endif %}>
            Active
        </label>

        <button type="submit" style="background:#004aad; color:white; padding:10px; border:none; border-radius:6px; cursor:pointer;">
            Save Changes
        </button>
    </form>

    <!-- Delete User -->
    <form method="POST" action="{{ url_for('admin.delete_user', user_id=user.id) }}" style="margin-top:20px;">
        <button type="submit" onclick="return confirm('Are you sure you want to delete this user?');" 
                style="background:#f44336; color:white; padding:10px; border:none; border-radius:6px; cursor:pointer; width:100%;">
            Delete User
        </button>
    </form>

    <!-- Back to Admin Dashboard -->
    <p style="text-align:center; margin-top:20px;">
        <a href="{{ url_for('admin.dashboard') }}" style="color:#004aad; text-decoration:underline;">Back to Admin Dashboard</a>
    </p>

</div>
{% endblock %}
